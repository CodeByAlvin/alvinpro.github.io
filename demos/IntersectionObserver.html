<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>

  <style>
    * {
      margin: 0;
      padding: 0;
    }
    
     body {
      height: 1000000px;
    }

   /* .box {
      width: 100px;
      height: 100px;
      color: red;
      background: red;
    } */

    nav {
      background: red;
    }

    .fixed {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
    }

    .reference {
      background: green;
      width: 100%;
      height: 40px;
    }

  </style>

</head>

<body>
  <!-- <div class="box"></div> -->
  <!-- 参照元素 -->
  <div class="reference"></div>
  <nav>我可以吸顶</nav>

  <div>1</div>
  <div>1</div>
  <div>1</div>
  <div>1</div>
  <div>1</div>
  <div>1</div>
  <div>1</div>
  <div>1</div>
  <div>1</div>
  <div>1</div>

</body>

<script>
  // let box = document.querySelector(".box");

  // let observer = new IntersectionObserver(entries => {

  //   console.log(entries);


  //   entries.forEach(item => {
  //     console.log(item)
  //     let tips = item.isIntersecting ? "进入了父元素的内部" : "离开了父元素的内部";
  //     console.log(tips);
  //   });
  // });

  // observer.observe(box); // 监听一个box


  let nav = document.querySelector("nav");
  let reference = document.querySelector(".reference");

  reference.style.top = nav.offsetTop + "px";

  new IntersectionObserver(entries => {
    console.log(entries[0])
    let item = entries[0];
    let top = item.boundingClientRect.top;
    console.log(top)

    // 当参照元素的的top值小于0，也就是在视窗的顶部的时候，开始吸顶，否则移除吸顶
    if (top < -40) nav.classList.add("fixed");
    else nav.classList.remove("fixed");

  }).observe(reference);
</script>

</html>